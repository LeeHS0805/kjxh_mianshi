{"remainingRequest":"/Users/leehs/Downloads/kjxh_mianshi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/leehs/Downloads/kjxh_mianshi/src/views/info.vue?vue&type=style&index=0&id=b36ea670&scoped=true&lang=scss&","dependencies":[{"path":"/Users/leehs/Downloads/kjxh_mianshi/src/views/info.vue","mtime":1601200281419},{"path":"/Users/leehs/Downloads/kjxh_mianshi/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leehs/Downloads/kjxh_mianshi/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/leehs/Downloads/kjxh_mianshi/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/leehs/Downloads/kjxh_mianshi/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leehs/Downloads/kjxh_mianshi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leehs/Downloads/kjxh_mianshi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojaW5mbyB7CiAgdGV4dC1hbGlnbjogbm9uZTsKICBsaW5lLWhlaWdodDogMDsKICBoZWFkZXIgewogICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBmbGV4LXdyYXA6IG5vd3JhcDsKICAgIC53YXJwMSB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtd3JhcDogbm93cmFwOwogICAgICAuZWwtaW5wdXQgewogICAgICAgIG1pbi13aWR0aDogMjAwcHg7CiAgICAgICAgbWF4LXdpZHRoOiA1MDBweDsKICAgICAgfQogICAgfQogICAgLndhcnAyIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC13cmFwOiBub3dyYXA7CiAgICB9CiAgfQogIC5lbC10YWJsZSB7CiAgICBtaW4td2lkdGg6IDcwMHB4OwogIH0KICAudGltZUNoYW5nZVN1Ym1pdCB7CiAgICBtaW4td2lkdGg6IDE4MHB4OwogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwogIH0KfQoKLml2dS1tb2RhbC1jb250ZW50IHsKICAubGV2ZWwxIHsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7CiAgfQogIC5sZXZlbDIgewogICAgcCB7CiAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICB9CiAgICAud2FycCB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIH0KICB9Cn0KLmJ1dHRvbjEtZW50ZXItYWN0aXZlIHsKICBhbmltYXRpb246IGZhZGVJblVwOwogIGFuaW1hdGlvbi1kdXJhdGlvbjogMC43NXM7Cn0K"},{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"info\">\n    <header>\n      <div class=\"warp1\">\n        <el-input v-model=\"searchData\" placeholder=\"请输入搜索内容\"></el-input>\n        <el-button type=\"success\" @click=\"search\">搜索</el-button>\n      </div>\n      <div class=\"warp2\">\n        <el-button @click=\"getExcel\">导出excel</el-button>\n        <el-button @click=\"switchTo('weightChange')\">修改权值</el-button>\n        <el-button @click=\"timeChange = !timeChange\"\n          >开启修改时间面板</el-button\n        >\n      </div>\n    </header>\n\n    <el-table\n      :data=\"tableData\"\n      @row-click=\"forDetail\"\n      @selection-change=\"batchChange\"\n    >\n      <el-table-column type=\"selection\" v-if=\"timeChange\"></el-table-column>\n      <el-table-column\n        prop=\"studentId\"\n        label=\"学号\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"name\"\n        label=\"姓名\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"class\"\n        label=\"班级\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"time1\"\n        label=\"一面时间\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"score1\"\n        label=\"一面分数\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"time2\"\n        label=\"二面时间\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"score2\"\n        label=\"二面分数\"\n      ></el-table-column>\n      <el-table-column label=\"动作\" align=\"center\">\n        <template v-slot=\"scope\">\n          <div class=\"action\">\n            <el-button\n              :disabled=\"!timeChange\"\n              @click.stop=\"singalOpenChange(scope.row)\"\n              >修改面试时间</el-button\n            >\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <transition name=\"button1\">\n      <div class=\"timeChangeSubmit\" v-if=\"timeChange\">\n        <el-button @click=\"mulOpenChange(1)\">批量修改一面时间</el-button>\n        <el-button @click=\"mulOpenChange(2)\">批量修改二面时间</el-button>\n      </div>\n    </transition>\n\n    <Modal\n      v-model=\"timeChangeWindow.show\"\n      @on-ok=\"sendChange\"\n      @on-cancel=\"cancelChange\"\n    >\n      <div class=\"level1\" v-if=\"timeChangeWindow.step1\">\n        <el-button @click=\"singalOpenChange2(1)\">修改一面时间</el-button>\n        <el-button @click=\"singalOpenChange2(2)\">修改二面时间</el-button>\n      </div>\n      <div class=\"level2\" v-else>\n        <p>{{ changeTimes }}时间</p>\n        <div class=\"warp\">\n          <el-date-picker\n            v-model=\"timeChangeWindow.timeDate\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n            value-format=\"yyyy-MM-dd\"\n          ></el-date-picker>\n          <el-time-select\n            v-model=\"timeChangeWindow.timeHour\"\n            :picker-options=\"{\n              start: '00:00',\n              step: '00:30',\n              end: '23:30',\n            }\"\n            placeholder=\"选择时间\"\n          ></el-time-select>\n        </div>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport infoApi from \"@/api/info.js\";\n\nexport default {\n  name: \"info\",\n  data() {\n    return {\n      searchData: \"\",\n      tableData: [],\n      timeChange: false,\n      timeChangeWindow: {\n        step1: true,\n        show: false,\n        timeDate: \"\",\n        timeHour: \"\",\n        interview: \"\",\n        studentId: [],\n      },\n    };\n  },\n  mounted() {\n    //获取uuid\n    let uuid = sessionStorage.getItem(\"uuid\");\n    //获取全部信息\n    infoApi.getAllStudents(uuid, this);\n  },\n  methods: {\n    //切换到修改权值窗口\n    switchTo(name) {\n      this.$router.push({ name: name });\n    },\n    //查询详细信息\n    forDetail(row) {\n      this.$router.push(`/stuDetails/${row.studentId}`);\n    },\n    //批量修改时间\n    batchChange(selection) {\n      //清空数组\n      this.timeChangeWindow.studentId.length = 0;\n      //加入已选取的元素\n      selection.forEach((val) => {\n        this.timeChangeWindow.studentId.push(val.studentId);\n      });\n    },\n    //单行修改第一步\n    singalOpenChange(row) {\n      //清空数组\n      this.timeChangeWindow.studentId.length = 0;\n      //加入选中单元素\n      this.timeChangeWindow.studentId.push(row.studentId);\n      //打开修改窗口\n      this.timeChangeWindow.show = true;\n    },\n    //单行修改第二步\n    singalOpenChange2(index) {\n      //一面还是二面\n      this.timeChangeWindow.interview = index;\n      //切换到第二步\n      this.timeChangeWindow.step1 = false;\n    },\n    //多选打开\n    mulOpenChange(index) {\n      //一面还是二面\n      this.timeChangeWindow.interview = index;\n      //切换到第二步\n      this.timeChangeWindow.step1 = false;\n      //显示窗口\n      this.timeChangeWindow.show = true;\n    },\n    //发送修改\n    sendChange() {\n      //拦截第一步\n      if (this.timeChangeWindow.step1) {\n        return;\n      }\n      //生成数据\n      let data = {\n        uuid: sessionStorage.getItem(\"uuid\"),\n        studentId: this.timeChangeWindow.studentId,\n        interview: this.timeChangeWindow.interview,\n        time:\n          this.timeChangeWindow.timeDate + \" \" + this.timeChangeWindow.timeHour,\n      };\n      //发送数据\n      infoApi.changeTime(data, this);\n      //重制步骤\n      this.timeChangeWindow.step1 = true;\n    },\n    //取消修改\n    cancelChange() {\n      console.log(`取消修改`);\n      //重制步骤\n      this.timeChangeWindow.step1 = true;\n    },\n    //搜索数据\n    search() {\n      if (this.searchData == undefined || this.searchData == \"\") {\n        this.$message({\n          type: \"error\",\n          message: \"请输入搜索内容！\",\n        });\n        return;\n      }\n      let data = {\n        uuid: sessionStorage.getItem(\"uuid\"),\n        keyWorld: this.searchData,\n      };\n      infoApi.searchApi(data, this);\n    },\n    //导出excel表格\n    getExcel() {\n      require.ensure([], () => {\n        const { export_json_to_excel } = require(\"../config/Export2Excel\");\n        const tHeader = [\n          \"学号\",\n          \"姓名\",\n          \"班级\",\n          \"一面时间\",\n          \"一面分数\",\n          \"二面分数\",\n          \"二面时间\",\n        ];\n        const filterVal = [\n          \"studentId\",\n          \"name\",\n          \"class\",\n          \"time1\",\n          \"score1\",\n          \"time2\",\n          \"score2\",\n        ];\n        const list = this.tableData;\n        const data = this.formatJson(filterVal, list);\n        export_json_to_excel(tHeader, data, \"SCSE面试系统详情\");\n      });\n    },\n    formatJson(filterVal, jsonData) {\n      return jsonData.map((v) => filterVal.map((j) => v[j]));\n    },\n  },\n  computed: {\n    changeTimes() {\n      return this.timeChangeWindow.interview === 1 ? \"一面\" : \"二面\";\n    },\n  },\n  components: {},\n};\n</script>\n\n<style scoped lang=\"scss\">\n#info {\n  text-align: none;\n  line-height: 0;\n  header {\n    margin-bottom: 30px;\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: nowrap;\n    .warp1 {\n      display: flex;\n      flex-wrap: nowrap;\n      .el-input {\n        min-width: 200px;\n        max-width: 500px;\n      }\n    }\n    .warp2 {\n      display: flex;\n      flex-wrap: nowrap;\n    }\n  }\n  .el-table {\n    min-width: 700px;\n  }\n  .timeChangeSubmit {\n    min-width: 180px;\n    margin-top: 20px;\n    display: flex;\n    justify-content: flex-end;\n  }\n}\n\n.ivu-modal-content {\n  .level1 {\n    margin-top: 20px;\n    display: flex;\n    justify-content: space-around;\n  }\n  .level2 {\n    p {\n      font-size: 18px;\n      font-weight: bold;\n      margin-bottom: 20px;\n    }\n    .warp {\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n}\n.button1-enter-active {\n  animation: fadeInUp;\n  animation-duration: 0.75s;\n}\n</style>\n"]}]}